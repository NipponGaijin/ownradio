<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<StiSerializer version="1.02" type="Net" application="StiReport">
  <Culture>ru-RU</Culture>
  <Dictionary Ref="1" type="Dictionary" isKey="true">
    <BusinessObjects isList="true" count="0" />
    <Databases isList="true" count="1">
      <PostgreSQL Ref="2" type="Stimulsoft.Report.Dictionary.StiPostgreSQLDatabase" isKey="true">
        <Alias>PostgreSQL</Alias>
        <ConnectionStringEncrypted>w9Lb68gIs4FtfM2E6yVgEtVc9aFhBUP94Rix9GMVJUbzyPOjxkoB9Wlb+YTpCaUXglT7iGdNUYXhSdC9YQl3Rt/I24nNVzGYQ0y5gOoB4C/FeNnC41dD1eJN4YjoceBqhdrRoQ==</ConnectionStringEncrypted>
        <Name>PostgreSQL</Name>
      </PostgreSQL>
    </Databases>
    <DataSources isList="true" count="3">
      <users Ref="3" type="Stimulsoft.Report.Dictionary.StiPostgreSQLSource" isKey="true">
        <Alias>users</Alias>
        <Columns isList="true" count="15">
          <value>recid,System.Guid</value>
          <value>recname,System.String</value>
          <value>reccode,System.String</value>
          <value>recdescription,System.String</value>
          <value>reccreated,System.DateTime</value>
          <value>recupdated,System.DateTime</value>
          <value>reccreatedby,System.String</value>
          <value>recupdatedby,System.String</value>
          <value>recstate,System.Int64</value>
          <value>experience,System.Int64</value>
          <value>userlastlistendate,System.String</value>
          <value>deviceid,System.Guid</value>
          <value>devicescount,System.Int32</value>
          <value>lastlisten,System.DateTime</value>
          <value>listenscount,System.Int32</value>
        </Columns>
        <CommandTimeout>30</CommandTimeout>
        <Dictionary isRef="1" />
        <Name>users</Name>
        <NameInSource>PostgreSQL</NameInSource>
        <Parameters isList="true" count="0" />
        <SqlCommand>SELECT
	users.recid,
	users.recname,
	users.experience, 
	(SELECT COUNT(devices) FROM devices WHERE devices.userid = users.recid) AS devicescount,
	(SELECT COUNT(histories) FROM histories WHERE histories.userid = users.recid) AS listenscount,
	(SELECT histories.lastlisten FROM histories WHERE histories.userid = users.recid ORDER BY histories.lastlisten DESC LIMIT 1) AS lastlisten
FROM users
	JOIN devices ON devices.userid = users.recid
GROUP BY users.recname, users.recid
ORDER BY lastlisten DESC NULLS LAST</SqlCommand>
      </users>
      <histories Ref="4" type="Stimulsoft.Report.Dictionary.StiPostgreSQLSource" isKey="true">
        <Alias>histories</Alias>
        <Columns isList="true" count="18">
          <value>recid,System.String</value>
          <value>recname,System.String</value>
          <value>reccode,System.String</value>
          <value>recdescription,System.String</value>
          <value>reccreated,System.DateTime</value>
          <value>recupdated,System.DateTime</value>
          <value>reccreatedby,System.String</value>
          <value>recupdatedby,System.String</value>
          <value>recstate,System.Int64</value>
          <value>trackid,System.String</value>
          <value>deviceid,System.Guid</value>
          <value>userid,System.String</value>
          <value>islisten,System.Int64</value>
          <value>lastlisten,System.DateTime</value>
          <value>countsend,System.Int64</value>
          <value>listenscount,System.Int32</value>
          <value>lastlistendate,System.DateTime</value>
          <value>devicename,System.String</value>
        </Columns>
        <CommandTimeout>30</CommandTimeout>
        <Dictionary isRef="1" />
        <Name>histories</Name>
        <NameInSource>PostgreSQL</NameInSource>
        <Parameters isList="true" count="1">
          <value>user_id,IIF_x0028_this_x005B__x0022_usersRecid_x0022__x005D__x0020__x003D__x003D__x0020_null_x002C__x0020_null_x002C__x0020_this_x005B__x0022_usersRecid_x0022__x005D__x0029_,27,0</value>
        </Parameters>
        <SqlCommand>SELECT devices.recname AS devicename,
	histories.deviceid,
	COUNT(histories) AS listenscount,
	(SELECT histories.lastlisten FROM histories WHERE histories.deviceid = devices.recid ORDER BY histories.lastlisten DESC LIMIT 1) AS lastlistendate
FROM devices
LEFT JOIN histories ON histories.deviceid = devices.recid
WHERE devices.userid = @user_id
GROUP BY devices.recname, devices.recid, histories.deviceid</SqlCommand>
      </histories>
      <downloadtracks Ref="5" type="Stimulsoft.Report.Dictionary.StiPostgreSQLSource" isKey="true">
        <Alias>downloadtracks</Alias>
        <Columns isList="true" count="22">
          <value>recid,System.String</value>
          <value>recname,System.String</value>
          <value>reccode,System.String</value>
          <value>recdescription,System.String</value>
          <value>reccreated,System.DateTime</value>
          <value>recupdated,System.DateTime</value>
          <value>reccreatedby,System.String</value>
          <value>recupdatedby,System.String</value>
          <value>recstate,System.Int64</value>
          <value>trackid,System.Guid</value>
          <value>deviceid,System.String</value>
          <value>methodid,System.Int64</value>
          <value>txtrecommendinfo,System.String</value>
          <value>userrecommendid,System.String</value>
          <value>userid,System.String</value>
          <value>userrecommend,System.String</value>
          <value>trackartist,System.String</value>
          <value>trackname,System.String</value>
          <value>uploadername,System.String</value>
          <value>islisten,System.Int32</value>
          <value>lastlisten,System.DateTime</value>
          <value>downloaddate,System.DateTime</value>
        </Columns>
        <CommandTimeout>30</CommandTimeout>
        <Dictionary isRef="1" />
        <Name>downloadtracks</Name>
        <NameInSource>PostgreSQL</NameInSource>
        <Parameters isList="true" count="1">
          <value>device_id,IIF_x0028_this_x005B__x0022_deviceid_x0022__x005D__x0020__x003D__x003D__x0020_null_x002C__x0020_null_x002C__x0020_this_x005B__x0022_deviceid_x0022__x005D__x0029_,27,0</value>
        </Parameters>
        <SqlCommand>SELECT histories.trackid AS trackid,
	tracks.artist AS trackartist,
	tracks.recname AS trackname,
	users.recname AS uploadername,
	histories.islisten AS islisten,
	histories.lastlisten AS lastlisten,
	(SELECT downloadtracks.reccreated FROM downloadtracks WHERE downloadtracks.deviceid = histories.deviceid AND downloadtracks.trackid = tracks.recid ORDER BY downloadtracks.reccreated DESC LIMIT 1) AS downloaddate
FROM histories
LEFT JOIN tracks ON tracks.recid = histories.trackid
LEFT JOIN devices ON devices.recid = tracks.deviceid
LEFT JOIN users ON users.recid = devices.userid
WHERE histories.deviceid = @device_id
ORDER BY histories.lastlisten DESC</SqlCommand>
      </downloadtracks>
    </DataSources>
    <Relations isList="true" count="0" />
    <Report isRef="0" />
    <Resources isList="true" count="0" />
    <Variables isList="true" count="1">
      <value>,displayZeroListens,Отображать_x0020_пользователей_x0020_без_x0020_прослушиваний,,System.Boolean,false,False,False,True,False</value>
    </Variables>
  </Dictionary>
  <EngineVersion>EngineV2</EngineVersion>
  <GlobalizationStrings isList="true" count="0" />
  <Key>5e5b6e1d87f34df4a31cb86144c9a748</Key>
  <MetaTags isList="true" count="0" />
  <Pages isList="true" count="3">
    <MainPage Ref="6" type="Page" isKey="true">
      <Alias>Главная страница</Alias>
      <Border>None;Black;2;Solid;False;4;Black</Border>
      <Brush>Transparent</Brush>
      <Components isList="true" count="2">
        <ColumnHeaderBand1 Ref="7" type="Stimulsoft.Report.Components.StiColumnHeaderBand" isKey="true">
          <Brush>Transparent</Brush>
          <ClientRectangle>0,0.4,19,1.2</ClientRectangle>
          <Components isList="true" count="5">
            <Text1 Ref="8" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>Transparent</Brush>
              <ClientRectangle>0,0,5,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>94732b49544a4f40b4d761a1f2a9337b</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text1</Name>
              <Page isRef="6" />
              <Parent isRef="7" />
              <Text>Имя пользователя</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text1>
            <Text2 Ref="9" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>Transparent</Brush>
              <ClientRectangle>5,0,2.8,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>9c0fc05bcfca49e8b505ea4d5ac10bc4</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text2</Name>
              <Page isRef="6" />
              <Parent isRef="7" />
              <Text>Статус</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text2>
            <Text3 Ref="10" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>Transparent</Brush>
              <ClientRectangle>11.6,0,3.6,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>7d13743e84fe4f288cc52a217fd25b2b</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text3</Name>
              <Page isRef="6" />
              <Parent isRef="7" />
              <Text>Количество прослушиваний
</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text3>
            <Text4 Ref="11" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>Transparent</Brush>
              <ClientRectangle>15.2,0,3.8,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>908189e570e04ff09f7d37f144f1a59e</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text4</Name>
              <Page isRef="6" />
              <Parent isRef="7" />
              <Text>Дата последнего прослушивания
</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text4>
            <Text6 Ref="12" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>Transparent</Brush>
              <ClientRectangle>7.8,0,3.8,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text6</Name>
              <Page isRef="6" />
              <Parent isRef="7" />
              <Text>Количество устройств</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text6>
          </Components>
          <Conditions isList="true" count="0" />
          <Guid>5ee5f7a35803413da86f00de6e303bcb</Guid>
          <Name>ColumnHeaderBand1</Name>
          <Page isRef="6" />
          <Parent isRef="6" />
        </ColumnHeaderBand1>
        <DataBand1 Ref="13" type="DataBand" isKey="true">
          <Border>All;Black;1;Solid;False;4;Black</Border>
          <Brush>Transparent</Brush>
          <BusinessObjectGuid isNull="true" />
          <ClientRectangle>0,2.4,19,0.8</ClientRectangle>
          <Components isList="true" count="5">
            <Text5 Ref="14" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>0,0,5,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Margins>0,0,0,0</Margins>
              <Name>Text5</Name>
              <Page isRef="6" />
              <Parent isRef="13" />
              <Text>{users.recname}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text5>
            <Text7 Ref="15" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>5,0,2.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>fc1fe018bc9c40c791a8329c47e61b94</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text7</Name>
              <Page isRef="6" />
              <Parent isRef="13" />
              <Printable>False</Printable>
              <Text>{IIF(users.experience &gt;= 10, "Эксперт", "Не эксперт")}</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text7>
            <Text8 Ref="16" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>7.8,0,3.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>11e6d9723ea2452bb2c6c87b352b66c5</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text8</Name>
              <Page isRef="6" />
              <Parent isRef="13" />
              <Text>{users.devicescount}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text8>
            <Text9 Ref="17" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>11.6,0,3.6,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>f959d0e91fd3464d8903490f639cee3c</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text9</Name>
              <Page isRef="6" />
              <Parent isRef="13" />
              <Text>{users.listenscount}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text9>
            <Text10 Ref="18" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>15.2,0,3.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>1ce22aa8207a48a4bb85394dfcd7edae</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text10</Name>
              <Page isRef="6" />
              <Parent isRef="13" />
              <Text>{users.lastlisten}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text10>
          </Components>
          <Conditions isList="true" count="0" />
          <DataRelationName isNull="true" />
          <DataSourceName>users</DataSourceName>
          <FilterMode>Or</FilterMode>
          <Filters isList="true" count="2">
            <value>_x007B_displayZeroListens_x0020__x003D__x003D__x0020_true_x007D_</value>
            <value>_x007B_users.lastlisten_x0020__x0021__x003D__x0020_null_x0020__x0026__x0026__x0020_displayZeroListens_x0020__x003D__x003D__x0020_false_x007D_</value>
          </Filters>
          <Interaction Ref="19" type="Stimulsoft.Report.Components.StiBandInteraction" isKey="true">
            <DrillDownEnabled>True</DrillDownEnabled>
            <DrillDownPageGuid>cc8f3a11c25540749d65ec77bf3fe4a3</DrillDownPageGuid>
            <DrillDownParameter1 Ref="20" type="Stimulsoft.Report.Components.StiDrillDownParameter" isKey="true">
              <Expression>users.recid</Expression>
              <Name>usersRecid</Name>
            </DrillDownParameter1>
          </Interaction>
          <Name>DataBand1</Name>
          <Page isRef="6" />
          <Parent isRef="6" />
          <Sort isList="true" count="0" />
        </DataBand1>
      </Components>
      <Conditions isList="true" count="0" />
      <Guid>56e90757b2c74900936551fb3d8c1b40</Guid>
      <Margins>1,1,1,1</Margins>
      <Name>MainPage</Name>
      <PageHeight>29.7</PageHeight>
      <PageWidth>21</PageWidth>
      <Report isRef="0" />
      <Watermark Ref="21" type="Stimulsoft.Report.Components.StiWatermark" isKey="true">
        <Font>Arial,100</Font>
        <TextBrush>[50:0:0:0]</TextBrush>
      </Watermark>
    </MainPage>
    <DeviceChoise Ref="22" type="Page" isKey="true">
      <Alias>Выбор устроства</Alias>
      <Border>None;Black;2;Solid;False;4;Black</Border>
      <Brush>Transparent</Brush>
      <Components isList="true" count="3">
        <PageHeaderBand1 Ref="23" type="PageHeaderBand" isKey="true">
          <Brush>Transparent</Brush>
          <ClientRectangle>0,0.4,19,0.8</ClientRectangle>
          <Components isList="true" count="1">
            <Text11 Ref="24" type="Text" isKey="true">
              <Brush>White</Brush>
              <ClientRectangle>0,0,19,1</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text11</Name>
              <Page isRef="22" />
              <Parent isRef="23" />
              <Text>Устройства для пользователя "{this["usersRecid"]}"</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text11>
          </Components>
          <Conditions isList="true" count="0" />
          <Name>PageHeaderBand1</Name>
          <Page isRef="22" />
          <Parent isRef="22" />
        </PageHeaderBand1>
        <ColumnHeaderBand2 Ref="25" type="Stimulsoft.Report.Components.StiColumnHeaderBand" isKey="true">
          <Brush>Transparent</Brush>
          <ClientRectangle>0,2,19,1.2</ClientRectangle>
          <Components isList="true" count="4">
            <Text12 Ref="26" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>0,0,5,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text12</Name>
              <Page isRef="22" />
              <Parent isRef="25" />
              <Text>Id устройства</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text12>
            <Text13 Ref="27" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>5,0,4.6,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>68a847083afa48a5b32a66f64beea8d6</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text13</Name>
              <Page isRef="22" />
              <Parent isRef="25" />
              <Text>Название устройства</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text13>
            <Text14 Ref="28" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>9.6,0,4,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>dbfe7854691c4893af1da4b63033506c</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text14</Name>
              <Page isRef="22" />
              <Parent isRef="25" />
              <Text>Количество прослушиваний</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text14>
            <Text15 Ref="29" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>13.6,0,5.4,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>0d89953a0ef84f75b817fa6a37d481a9</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text15</Name>
              <Page isRef="22" />
              <Parent isRef="25" />
              <Text>Дата последнего прослушивания
</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text15>
          </Components>
          <Conditions isList="true" count="0" />
          <Name>ColumnHeaderBand2</Name>
          <Page isRef="22" />
          <Parent isRef="22" />
        </ColumnHeaderBand2>
        <DataBand2 Ref="30" type="DataBand" isKey="true">
          <Brush>Transparent</Brush>
          <BusinessObjectGuid isNull="true" />
          <ClientRectangle>0,4,19,0.8</ClientRectangle>
          <Components isList="true" count="4">
            <Text16 Ref="31" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>0,0,5,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Margins>0,0,0,0</Margins>
              <Name>Text16</Name>
              <Page isRef="22" />
              <Parent isRef="30" />
              <Text>{histories.deviceid.ToString()}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text16>
            <Text17 Ref="32" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>5,0,4.6,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>0c0ba95415eb4ccdad3f370d962f8a68</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text17</Name>
              <Page isRef="22" />
              <Parent isRef="30" />
              <Text>{histories.devicename}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text17>
            <Text18 Ref="33" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>9.6,0,4,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>6e11bff9e913460ea0890840caf14853</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text18</Name>
              <Page isRef="22" />
              <Parent isRef="30" />
              <Text>{histories.listenscount}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text18>
            <Text19 Ref="34" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>13.6,0,5.4,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <Guid>ea3ef43ce59b487fbd1603f781a32937</Guid>
              <Margins>0,0,0,0</Margins>
              <Name>Text19</Name>
              <Page isRef="22" />
              <Parent isRef="30" />
              <Text>{histories.lastlistendate}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text19>
          </Components>
          <Conditions isList="true" count="0" />
          <DataRelationName isNull="true" />
          <DataSourceName>histories</DataSourceName>
          <Filters isList="true" count="0" />
          <Interaction Ref="35" type="Stimulsoft.Report.Components.StiBandInteraction" isKey="true">
            <DrillDownEnabled>True</DrillDownEnabled>
            <DrillDownPageGuid>cf0d043ea3a64eec9d45eab2d3af09b1</DrillDownPageGuid>
            <DrillDownParameter1 Ref="36" type="Stimulsoft.Report.Components.StiDrillDownParameter" isKey="true">
              <Expression>histories.deviceid</Expression>
              <Name>deviceid</Name>
            </DrillDownParameter1>
            <DrillDownParameter2 Ref="37" type="Stimulsoft.Report.Components.StiDrillDownParameter" isKey="true">
              <Expression>histories.devicename</Expression>
              <Name>devicename</Name>
            </DrillDownParameter2>
          </Interaction>
          <Name>DataBand2</Name>
          <Page isRef="22" />
          <Parent isRef="22" />
          <Sort isList="true" count="0" />
        </DataBand2>
      </Components>
      <Conditions isList="true" count="0" />
      <Guid>cc8f3a11c25540749d65ec77bf3fe4a3</Guid>
      <Margins>1,1,1,1</Margins>
      <Name>DeviceChoise</Name>
      <PageHeight>29.7</PageHeight>
      <PageWidth>21</PageWidth>
      <Report isRef="0" />
      <Watermark Ref="38" type="Stimulsoft.Report.Components.StiWatermark" isKey="true">
        <Font>Arial,100</Font>
        <TextBrush>[50:0:0:0]</TextBrush>
      </Watermark>
    </DeviceChoise>
    <DeviceDetails Ref="39" type="Page" isKey="true">
      <Alias>Детали по прослушиваниями на устройстве</Alias>
      <Border>None;Black;2;Solid;False;4;Black</Border>
      <Brush>Transparent</Brush>
      <Components isList="true" count="3">
        <PageHeaderBand2 Ref="40" type="PageHeaderBand" isKey="true">
          <Brush>Transparent</Brush>
          <ClientRectangle>0,0.4,27.7,0.8</ClientRectangle>
          <Components isList="true" count="1">
            <Text20 Ref="41" type="Text" isKey="true">
              <Brush>White</Brush>
              <ClientRectangle>0,0,27.8,1</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>5d8331ab12ac4894b0658d2eccfd55e0</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text20</Name>
              <Page isRef="39" />
              <Parent isRef="40" />
              <Text>Детали для устройства "{this["devicename"]}"</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text20>
          </Components>
          <Conditions isList="true" count="0" />
          <Guid>b0d40b8180fd42a694caaf3c502e108b</Guid>
          <Name>PageHeaderBand2</Name>
          <Page isRef="39" />
          <Parent isRef="39" />
        </PageHeaderBand2>
        <ColumnHeaderBand3 Ref="42" type="Stimulsoft.Report.Components.StiColumnHeaderBand" isKey="true">
          <Brush>Transparent</Brush>
          <ClientRectangle>0,2,27.7,1.2</ClientRectangle>
          <Components isList="true" count="7">
            <Text21 Ref="43" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>0,0,4.6,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>c1884b0101c2463b98c1b3ce12029ccc</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text21</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Id трека</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text21>
            <Text22 Ref="44" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>4.6,0,5,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>b392671682ee4f6aa248d67dfa19c7ca</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text22</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Исполнитель</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text22>
            <Text23 Ref="45" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>9.6,0,4,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>bcc12a8c06284aa4afc363be10e5f8fe</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text23</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Название</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text23>
            <Text24 Ref="46" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>17,0,2.8,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>0b86c0984f844153af86073f65d68598</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text24</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Дослушан</Text>
              <TextBrush>Black</TextBrush>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text24>
            <Text25 Ref="47" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>19.8,0,3.8,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>6c8c09a1e90b48e7b4141a72ef796136</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text25</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Дата прослушивания</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text25>
            <Text26 Ref="48" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>13.6,0,3.4,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>a091381efc21403bbc1bad1fb4c3727f</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text26</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Загружен пользователем</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text26>
            <Text27 Ref="49" type="Text" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <ClientRectangle>23.6,0,4,1.2</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,12,Bold</Font>
              <Guid>278306aaaf3043c48f22d61f02980b3a</Guid>
              <HorAlignment>Center</HorAlignment>
              <Margins>0,0,0,0</Margins>
              <Name>Text27</Name>
              <Page isRef="39" />
              <Parent isRef="42" />
              <Text>Дата выдачи</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Text27>
          </Components>
          <Conditions isList="true" count="0" />
          <Guid>c2c793bfb65e43418a8064c806cf26d4</Guid>
          <Name>ColumnHeaderBand3</Name>
          <Page isRef="39" />
          <Parent isRef="39" />
        </ColumnHeaderBand3>
        <Table1 Ref="50" type="Stimulsoft.Report.Components.Table.StiTable" isKey="true">
          <Border>All;Black;1;Solid;False;4;Black</Border>
          <Brush>Transparent</Brush>
          <BusinessObjectGuid isNull="true" />
          <ClientRectangle>0,4,27.7,0.8</ClientRectangle>
          <ColumnCount>7</ColumnCount>
          <Components isList="true" count="7">
            <Table1_Cell1 Ref="51" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>0,0,4.6,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>0</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell1</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.trackid}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell1>
            <Table1_Cell2 Ref="52" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>4.6,0,5,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>1</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell2</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.trackartist}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell2>
            <Table1_Cell3 Ref="53" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>9.6,0,4,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>2</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell3</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.trackname}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell3>
            <Table1_Cell4 Ref="54" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>13.6,0,3.4,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>3</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell4</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.uploadername}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell4>
            <Table1_Cell5 Ref="55" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>17,0,2.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>4</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell5</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{IIF(downloadtracks.islisten == 1, "Дослушан", "Не дослушан")}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell5>
            <Table1_Cell6 Ref="56" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>19.8,0,3.8,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>25</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell6</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.lastlisten}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>DataColumn</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell6>
            <Table1_Cell7 Ref="57" type="TableCell" isKey="true">
              <Border>All;Black;1;Solid;False;4;Black</Border>
              <Brush>White</Brush>
              <CanGrow>True</CanGrow>
              <ClientRectangle>23.6,0,4.1,0.8</ClientRectangle>
              <Conditions isList="true" count="0" />
              <Font>Arial,9</Font>
              <GrowToHeight>True</GrowToHeight>
              <ID>26</ID>
              <JoinCells isList="true" count="0" />
              <Margins>0,0,0,0</Margins>
              <Name>Table1_Cell7</Name>
              <Page isRef="39" />
              <Parent isRef="50" />
              <Restrictions>AllowMove, AllowSelect, AllowChange</Restrictions>
              <Text>{downloadtracks.downloaddate}</Text>
              <TextBrush>Black</TextBrush>
              <TextOptions>,,,,WordWrap=True,A=0</TextOptions>
              <Type>Expression</Type>
              <VertAlignment>Center</VertAlignment>
            </Table1_Cell7>
          </Components>
          <Conditions isList="true" count="0" />
          <DataRelationName isNull="true" />
          <DataSourceName>downloadtracks</DataSourceName>
          <Filters isList="true" count="0" />
          <MinHeight>0.2</MinHeight>
          <Name>Table1</Name>
          <NumberID>35</NumberID>
          <Page isRef="39" />
          <Parent isRef="39" />
          <RowCount>1</RowCount>
          <Sort isList="true" count="0" />
        </Table1>
      </Components>
      <Conditions isList="true" count="0" />
      <Guid>cf0d043ea3a64eec9d45eab2d3af09b1</Guid>
      <Margins>1,1,1,1</Margins>
      <Name>DeviceDetails</Name>
      <Orientation>Landscape</Orientation>
      <PageHeight>21</PageHeight>
      <PageWidth>29.7</PageWidth>
      <Report isRef="0" />
      <Watermark Ref="58" type="Stimulsoft.Report.Components.StiWatermark" isKey="true">
        <Font>Arial,100</Font>
        <TextBrush>[50:0:0:0]</TextBrush>
      </Watermark>
    </DeviceDetails>
  </Pages>
  <PrinterSettings Ref="59" type="Stimulsoft.Report.Print.StiPrinterSettings" isKey="true" />
  <ReferencedAssemblies isList="true" count="8">
    <value>System.Dll</value>
    <value>System.Drawing.Dll</value>
    <value>System.Windows.Forms.Dll</value>
    <value>System.Data.Dll</value>
    <value>System.Xml.Dll</value>
    <value>Stimulsoft.Controls.Dll</value>
    <value>Stimulsoft.Base.Dll</value>
    <value>Stimulsoft.Report.Dll</value>
  </ReferencedAssemblies>
  <ReportAlias>Report</ReportAlias>
  <ReportChanged>4/30/2019 3:10:44 PM</ReportChanged>
  <ReportCreated>4/24/2019 6:01:46 PM</ReportCreated>
  <ReportFile>C:\Users\aserov\Desktop\ownradioReports\report_with_device_choise.mrt</ReportFile>
  <ReportGuid>9987496c437a4985bf53c4f153c2207f</ReportGuid>
  <ReportName>Report</ReportName>
  <ReportUnit>Centimeters</ReportUnit>
  <ReportVersion>2018.3.5.0</ReportVersion>
  <Script>using System;
using System.Drawing;
using System.Windows.Forms;
using System.Data;
using Stimulsoft.Controls;
using Stimulsoft.Base.Drawing;
using Stimulsoft.Report;
using Stimulsoft.Report.Dialogs;
using Stimulsoft.Report.Components;

namespace Reports
{
    public class Report : Stimulsoft.Report.StiReport
    {
        public Report()        {
            this.InitializeComponent();
        }

        #region StiReport Designer generated code - do not modify
		#endregion StiReport Designer generated code - do not modify
    }
}
</Script>
  <ScriptLanguage>CSharp</ScriptLanguage>
  <Styles isList="true" count="0" />
</StiSerializer>